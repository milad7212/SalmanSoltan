# مستند ساختار سایت

این پروژه یک وب‌اپلیکیشن پخش موسیقی با Next.js (App Router) است که تک‌صفحه اصلی آن `MusicPlayer` را رندر می‌کند. در ادامه اجزای کلیدی و مسیرهای مهم توضیح داده شده‌اند.

## نمای کلی
- چارچوب: Next.js 16 (App Router) با React 19.
- زبان و راست‌چین: `lang="fa"` و `dir="rtl"` در `app/layout.tsx`.
- فونت: Montserrat از Google Fonts روی کل بدنه.
- آنالیتیکس: `@vercel/analytics` در لایه‌ی ریشه.
- استایل: Tailwind 4 + `tw-animate-css` با پالت تیره پیش‌فرض در `app/globals.css`.

## ساختار پوشه‌ها
- `app/`
  - `layout.tsx`: تعیین HTML shell، فونت، متادیتا و Analytics.
  - `page.tsx`: صفحه اصلی که فقط `MusicPlayer` را داخل `<main>` رندر می‌کند.
  - `globals.css`: تعریف تم (رنگ‌ها، radius، پایه Tailwind).
- `components/`
  - `music-player.tsx`: کل UI و منطق پخش (جست‌وجو، فیلتر، کارت‌ها، پلیر پایین صفحه).
  - `theme-provider.tsx`: ‌Thin wrapper برای `next-themes`.
  - `ui/`: کامپوننت‌های پایه‌ی UI (Card, Button, Input, ... از shadcn/radix).
- `public/`
  - کاورها و آیکن‌ها (`*.jpg`, `icon*.png`, `icon.svg`).
  - فایل‌های صوتی در `public/audio/`.
- `styles/globals.css`: نسخه‌ی دیگر تم با پالت روشن؛ در حال حاضر در مسیر `app/globals.css` جایگزین فعال وجود دارد.
- پیکربندی‌ها: `next.config.mjs`, `tsconfig.json`, `tailwind/postcss`، قفل‌های پکیج.

## جریان صفحه اصلی (`MusicPlayer`)
- داده‌ها: آرایه‌ی `songs` داخل فایل، شامل عنوان، مدت، دسته‌بندی، تصویر کاور و مسیر صوت.
- وضعیت‌ها: آهنگ جاری، پخش/توقف، شمارش پخش هر آهنگ (Persist در `localStorage` با کلید `playCount`)، جست‌وجو، فیلتر دسته‌بندی، زمان پخش، طول آهنگ، نمایش متن.
- فیلتر/جست‌وجو: جست‌وجوی متنی روی عنوان و فیلتر بر اساس دسته‌بندی (پیش‌فرض «همه»).
- کارت آهنگ‌ها: تصویر، برچسب دسته، مدت، دکمه پخش/توقف، شمارنده‌ی پخش، و آکاردئون متن آهنگ.
- پلیر پایینی (Bottom Player): وقتی در حال پخش است ظاهر می‌شود؛ شامل کاور، کنترل‌های قبلی/بعدی، دکمه پخش/توقف، نوار پیشرفت (کلیک‌پذیر) و نمایش متن درون پلیر.
- رویدادها: به‌روزرسانی زمان پخش (`onTimeUpdate`)، دریافت متادیتا برای طول آهنگ (`onLoadedMetadata`)، و ادامه خودکار آهنگ بعدی در پایان (`onEnded`).

## استایل و تم
- تم تیره با Accent فیروزه‌ای در `app/globals.css`; مقادیر رنگی روی متغیرهای CSS (oklch) ست شده‌اند.
- همه عناصر پایه Tailwind با `@apply bg-background text-foreground` در لایه base تنظیم شده‌اند.
- فونت و کلاس‌های Tailwind در بدنه‌ی `layout.tsx` اعمال شده است.

## دارایی‌های رسانه‌ای
- تصاویر کاور و آیکن‌ها در `public/`.
- ترک‌های صوتی در `public/audio/` ارجاع داده می‌شوند (مانند `/audio/Natars.mp3`).

## نکات توسعه/اجرا
- اسکریپت‌ها: `pnpm dev` یا `npm run dev` برای توسعه، `npm run build` برای ساخت، `npm start` برای اجرای نسخه تولید.
- اگر نیاز به تغییر تم دارید، متغیرهای تعریف‌شده در `app/globals.css` نقطه ورود مناسب هستند.

